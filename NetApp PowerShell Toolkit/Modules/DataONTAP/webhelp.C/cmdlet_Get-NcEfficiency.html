<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data ONTAP PowerShell Toolkit: Cmdlet Get-NcEfficiency</title></head><body><hr>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 CLASS="NavBarCell1">
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD CLASS="NavBarCell1">    <A HREF="index.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="categories.html"><FONT CLASS="NavBarFont1"><B>Categories</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="cmdlets.html"><FONT CLASS="NavBarFont1"><B>Cmdlets</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="apis.html"><FONT CLASS="NavBarFont1"><B>APIs</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="provider.html"><FONT CLASS="NavBarFont1"><B>Provider</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="releaseNotes.html"><FONT CLASS="NavBarFont1"><B>Release notes</B></FONT></A>&nbsp;</TD>
  <TD CLASS="NavBarCell1">    <A HREF="license.html"><FONT CLASS="NavBarFont1"><B>License</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="middle" ROWSPAN=1>
<img border="0" src="NetAppLogoSmall.png">&nbsp;<EM><b>Data ONTAP&reg;&nbsp;PowerShell&nbsp;Toolkit</b></EM>
</TD>
</TR>
</TABLE><hr>
<TABLE ALIGN="center">
<TD ALIGN="center" VALIGN="middle"><A HREF="../webhelp/index.html"><FONT CLASS="NavBarFont1"><B>Switch to Data ONTAP 7-mode documentation.</B></FONT></A></TD>
</TABLE><hr><H2>Cmdlet: Get-NcEfficiency</H2><PRE><br>NAME<br>    Get-NcEfficiency<br>    <br>SYNOPSIS<br>    Get efficiency information for volumes.<br>    <br>SYNTAX<br>    Get-NcEfficiency [[-Volume] &lt;String[]&gt;] [[-Vserver] &lt;String[]&gt;] <br>    [-Controller &lt;NcController[]&gt;] [-ZapiRetryCount &lt;Int32&gt;] <br>    [&lt;CommonParameters&gt;]<br>    <br>    <br>DESCRIPTION<br>    Get efficiency information for volumes.  The efficiency information <br>    includes the space savings that result from using several NetApp space <br>    savings technologies.<br>    <br>    The cmdlet returns a VolEfficiencyInfo object for each volume it <br>    investigaes.  An EfficiencyInfo object contains the following values:<br>    - Capacity:  The capacity of the storage object.<br>    - Used:  The amount of space used on the storage object.<br>    - Free:  The amount of space free on the storage object.<br>    - Returns:  A ReturnsInfo object which describes the storage efficiency <br>    returns.<br>    <br>    The VolEfficiency object returned contains the following volume-specific <br>    values:<br>    - SnapshotCount:  The number of snapshots of the volume.<br>    - SnapshotReserve:  The size of the snapshot reserve for the volume.<br>    - SnapshotUsed:  The amount of space used by snapshots.<br>    - SnapshotOverflow:  The amount of space consumed by snapshots outside of <br>    the snapshot reserve.<br>    - Reserve:  The amount of space in the overwrite reserve.  This space is <br>    saved as overwrite space for LUNs and files that have space reservation <br>    enabled.<br>    - ReserveUsed:  The amount of reserve space that is currently in use.<br>    - SpaceReserve:  The type of space reservation of the volume.  This value <br>    can be:  none, volume, or file.<br>    - QuotaCommitted:  The total amount of space committed on the volume to <br>    tree quotas.<br>    - QuotaUsed:  The amount of space used on the volume by qtrees with tree <br>    quotas set.<br>    - QuotaOvercommit:  The amount of space overcommitted to tree quotas.  If <br>    QuotaCommitted &lt; Capacity then the quota overcommit is zero.<br>    - TotalLunSize:  The total sze of all LUNs contained within this volume.<br>    - LunOverprovisionPercent:  The LUN over-provisioning percent of the <br>    volume.  This value is equal to (TotalLunSize / Capacity) * 100.<br>    - EffectiveUsed:  The amount of space that would be used without NetApp <br>    storage efficiency technologies.  This is equal to Used + Returns.<br>    - EfficiencyPercent:  A percentage representing the overall storage <br>    efficiency of the volume.  This is equal to (EffectiveUsed / Capacity) * <br>    100.<br>    - Qtrees:  A Hashtable containing the qtrees that exist for the volume.<br>    <br>    The QtreeEfficiency object contains the following qtree-specific values:<br>    - HasTreeQuota:  If true, the qtree has a tree quota enabled.  When a tree <br>    quota is enabled for the qtree, the Capacity value is equal to the <br>    DiskLimit of the quota.  The Capacity, Used, and Free values are only <br>    considered valid when HasTreeQuota is true.<br>    - Luns:  A Hashtable containing the LUNs contained within this qtree.<br>    <br>    The LunEfficiency object contains the following LUN-specific values:<br>    - IsThin:  If true, the LUN is thin provisioned (i.e. space reservation is <br>    not enabled).<br>    <br>    The VolReturnsInfo object contains the following volume efficiency returns <br>    information:<br>    - Dedupe:  The savings that result from using deduplication.<br>    - Compression:  The savings that result from using compression.<br>    - Snapshot:  The savings that result from using volume snapshots.  This is <br>    equal to:  Used - (SnapshotUsed / SnapshotCount).  We divide the snapshot <br>    used space by the number of snapshots to get an accurate savings <br>    calculation from volumes with long-running snapshots that effectively <br>    consume more space than the data.<br>    - Cloning:  The savings that result from using NetApp Volume FlexClones.  <br>    This value is equal to the result of the volume-clone-split-estimate API, <br>    that is, the amount of additional space that would be consumed if the <br>    volume were no longer a clone.<br>    <br>    The LunReturnsInfo object contains the following LUN efficiency information:<br>    - Thin:  The savings that result from LUN thin provisioning.  This is equal <br>    to the LUN size minus the LUN space consumed.<br>    <br><br>PARAMETERS<br>    -Volume &lt;String[]&gt;<br>        Volume for which to get efficiency information.  Data ONTAP wildcards <br>        are accepted.<br>        <br>        Required?                    false<br>        Position?                    1<br>        Default value                <br>        Accept pipeline input?       true (ByPropertyName)<br>        Accept wildcard characters?  false<br>        <br>    -Vserver &lt;String[]&gt;<br>        Vserver for which to get efficiency information.  Data ONTAP wildcards <br>        are accepted.<br>        <br>        Required?                    false<br>        Position?                    2<br>        Default value                <br>        Accept pipeline input?       true (ByPropertyName)<br>        Accept wildcard characters?  false<br>        <br>    -Controller &lt;NcController[]&gt;<br>        A clustered Data ONTAP controller to receive this cmdlet, as embodied <br>        by an NcController object.  This parameter is returned by the <br>        Connect-NcController cmdlet.  If not specified, the value in the global <br>        variable CurrentNcController is used.  In the latter case, if <br>        CurrentNcController contains a collection of NcController objects, this <br>        cmdlet is invoked on each controller in succession.<br>        <br>        Required?                    false<br>        Position?                    named<br>        Default value                <br>        Accept pipeline input?       true (ByValue, ByPropertyName)<br>        Accept wildcard characters?  false<br>        <br>    -ZapiRetryCount &lt;Int32&gt;<br>        <br>        <br>        Required?                    false<br>        Position?                    named<br>        Default value                <br>        Accept pipeline input?       false<br>        Accept wildcard characters?  false<br>        <br>    &lt;CommonParameters&gt;<br>        This cmdlet supports the common parameters: Verbose, Debug,<br>        ErrorAction, ErrorVariable, WarningAction, WarningVariable,<br>        OutBuffer and OutVariable. For more information, see <br>        about_CommonParameters (http://go.microsoft.com/fwlink/?LinkID=113216). <br>    <br>INPUTS<br>    <br>        <br>        <br>    <br>     <br>    <br>OUTPUTS<br>    DataONTAP.C.Types.Efficiency.VolEfficiency<br>        <br>        <br>    <br>     <br>    <br>NOTES<br>    <br>    <br>        Category: toolkit<br>        Family: cluster, vserver<br>    <br>    --------------  Example 1 --------------<br>    <br>    C:\PS&gt;Get-NcEfficiency -Vserver vserver1 -Volume nfs<br>    <br>    <br>    Get the efficiency information for the given volume on the given vserver.<br>    <br>    <br>    <br>    SnapshotCount           : 10<br>    SnapshotReserve         : 0<br>    SnapshotUsed            : 14760075264<br>    SnapshotOverflow        : 14760075264<br>    Reserve                 : 0<br>    ReserveUsed             : 0<br>    SpaceReserve            : none<br>    QuotaCommitted          : 0<br>    QuotaUsed               : 0<br>    QuotaOverCommit         : 0<br>    TotalLunSize            : 0<br>    LunOverprovisionPercent : 0<br>    EffectiveUsed           : 2028179085721<br>    EfficiencyPercent       : 944.4444839474745094776153564<br>    Qtrees                  : {[, DataONTAP.C.Types.Efficiency.QtreeEfficiency]}<br>    NcController            : 10.60.189.172<br>    Vserver                 : vserver1<br>    Name                    : nfs<br>    Capacity                : 214748364800<br>    Used                    : 94281019392<br>    Free                    : 120467255296<br>    Returns                 : 1933898066329<br>    <br>    <br>    <br>    --------------  Example 2 --------------<br>    <br>    C:\PS&gt;Get-NcEfficiency -Vserver dlamotta01<br>    <br>    <br>    Get the efficiency information for all of the volumes on the given vserver.<br>    <br>    <br>    <br>    Vserver: dlamotta01<br>    <br>    Name                       Capacity       Used   SnapshotUsed    Returns  <br>    EffectiveUsed  EfficiencyPercent<br>    ----                       --------       ----   ------------    -------  <br>    -------------  -----------------<br>    cifs                        95.0 GB     5.2 MB         2.1 MB     5.0 MB    <br>        10.3 MB               0.0%<br>    cmodesr2                     3.0 GB   244.0 KB              0          0    <br>       244.0 KB               0.0%<br>    dlamotta01_root_vol         19.0 MB   124.0 KB       720.0 KB    52.0 KB    <br>       176.0 KB               0.9%<br>    luns                        95.0 GB     3.5 GB       251.9 MB     3.6 GB    <br>         7.1 GB               7.4%<br>    luns_clone                  95.0 GB     3.5 GB         6.7 MB     6.9 GB    <br>        10.4 GB              11.0%<br>    vol1_SM1                     9.5 GB  1004.0 KB         1.1 MB   899.6 KB    <br>         1.9 MB               0.0%<br>    vol1_SM2                     9.5 GB  1004.0 KB         1.1 MB   906.7 KB    <br>         1.9 MB               0.0%<br>    <br>    <br>    <br>    --------------  Example 3 --------------<br>    <br>    C:\PS&gt;$eff = Get-NcEfficiency -Vserver dlamotta01<br>    $eff | % { $_.Qtrees.Values }<br>    <br>    <br>    View the information for all the qtrees on the given vserver.<br>    <br>    <br>    <br>    Vserver: dlamotta01<br>    <br>    Volume                   Name                      HasQtreeQuota     <br>    Capacity       Used<br>    ------                   ----                      -------------     <br>    --------       ----<br>    cifs                                                   False                <br>    -          -<br>    cifs                     qtree1                         True          10.0 <br>    GB          0<br>    cmodesr2                                               False                <br>    -          -<br>    dlamotta01_root_vol                                    False                <br>    -          -<br>    luns                                                    True           5.0 <br>    GB          0<br>    luns_clone                                             False                <br>    -          -<br>    vol1_SM1                                               False                <br>    -          -<br>    vol1_SM2                                               False                <br>    -          -<br>    <br>    <br>    <br>    --------------  Example 4 --------------<br>    <br>    C:\PS&gt;$eff = Get-NcEfficiency<br>    $eff | % { $_.Qtrees.Values } | % { $_.Luns.Values }<br>    <br>    <br>    Get all of the LUN information for the current cluster.<br>    <br>    <br>    <br>    Vserver: costea01<br>    <br>    Name                                   IsThin     Capacity       Used<br>    ----                                   ------     --------       ----<br>    /vol/xenfcp_vol/xenfcp                  True        1.0 GB          0<br>    <br>    <br>       Vserver: dlamotta01<br>    <br>    Name                                   IsThin     Capacity       Used<br>    ----                                   ------     --------       ----<br>    /vol/luns/lun0                          True      150.0 GB   330.7 MB<br>    /vol/luns/lun0_clone                    True      150.0 GB     3.2 GB<br>    /vol/luns_clone/lun0                    True      150.0 GB   330.7 MB<br>    /vol/luns_clone/lun0_clone              True      150.0 GB     3.2 GB<br>    <br>    <br>       Vserver: iscsivs1<br>    <br>    Name                                   IsThin     Capacity       Used<br>    ----                                   ------     --------       ----<br>    /vol/xenlun_vol/xenlun                  True        2.0 GB   100.4 MB<br>    <br>    <br>    <br>    <br>RELATED LINKS<br><br><br><br><br><br></PRE><br><hr>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0">
<TR>
<TD COLSPAN=2 CLASS="NavBarCell1">
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3">
  <TR ALIGN="center" VALIGN="top">
  <TD CLASS="NavBarCell1"><FONT CLASS="NavBarFont1"><B>Copyright&nbsp;&copy;&nbsp;2013 NetApp.&nbsp;&nbsp;All rights reserved.&nbsp;&nbsp;Use is subject to <A HREF="license.html">license</A> terms.</B></FONT>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="middle" ROWSPAN=1>
<img border="0" src="NetAppLogoSmall.png">&nbsp;<EM><b>Data ONTAP&reg;&nbsp;PowerShell&nbsp;Toolkit</b></EM>
</TD>
</TR>
</TABLE><hr></body></html>